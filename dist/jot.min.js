function Y(e,t){return t||=null,s(o=>{for(let[n,r]of Object.entries(e)){if(r==null)return o.removeAttributeNS(t,n);o.setAttributeNS(t,n,String(r))}})}var p=[],c=new Set,f=new WeakMap,W=(e,t)=>g(e)-g(t),q=e=>e!=null,z=()=>{[...c].sort(W).map(G).filter(q).forEach(queueMicrotask),c.clear()},y=e=>{c.has(e)||(c.size===0&&queueMicrotask(z),c.add(e),(N(e)||[]).forEach(y))},x=e=>f.get(e),N=e=>x(e)?.[1],L=e=>{let t=new Set;p.push(t);let o;try{o=e()}finally{p.pop()}let n=Symbol();for(let r of t)N(r)?.add(n);return f.set(n,[[...t].map(g).reduce(B,-1)+1,new Set,()=>o=e()]),[()=>(M(n),o),()=>{for(let r of t)N(r)?.delete(n);t.clear(),f.delete(n)}]};function g(e){return x(e)?.[0]||0}function B(e,t){return Math.max(e,t)}function G(e){return x(e)?.[2]}function M(e){p[p.length-1]?.add(e)}function te(e){let t=Symbol();return f.set(t,[0,new Set]),[o=>(o?y(t):M(t),e),o=>(e=o,y(t))]}var m=new WeakMap;function H(e,...t){let o=m.get(e);o||m.set(e,o=[]),o.push(...t.map(L).map(I))}function D(e){for(let t of m.get(e)||[])t();m.delete(e)}function I(e){return e[1]}var S=new WeakMap;function A(e){for(let[t,o,n]of S.get(e)||[])e.removeEventListener(t,o,n)}function ie(e,t,o){return s(n=>{n.addEventListener(e,t,o),S.get(n)?.push([e,t,o])===void 0&&S.set(n,[[e,t,o]])})}var C=new WeakSet;function j(e){return C.has(e)}function ae(e){return C.add(e),e}function E(e,t){if(!(!t&&j(e))){for(let o of[...e.childNodes])E(o,t);D(e),A(e),e.parentNode?.removeChild(e)}}var v=Symbol();function h(e,t,o){if(o!=null){switch(typeof o){case"function":return U(e,t,o);case"object":{if("nodeType"in o)return t(o);let n=h.bind(void 0,e,t);return v in o?n(o[v](e)):Array.isArray(o)?o.forEach(n):void Object.assign(e,o)}}e.ownerDocument&&t(e.ownerDocument.createTextNode(String(o)))}}function U(e,t,o){let n=[],r,a,u=n.push.bind(n);function i(){let l=e.ownerDocument;if(!l)return;if(!r){if(n.length===0)return;t(r=l.createTextNode("")),t(a=l.createTextNode(""))}let d=l.createRange();d.setStartAfter(r),d.setEndBefore(a);let $=d.extractContents();if(setTimeout(E,100,$),n.length===0)return;let V=l.createDocumentFragment();V.append(...n),d.insertNode(V)}H(e,()=>{h(e,u,o(e)),i(),n.length=0})}function s(e){return{[v]:e}}function P(e,...t){let o=e.appendChild.bind(e),n=h.bind(void 0,e,o);return t.forEach(n),e}function Z(...e){return P(this(),...e)}function ge(e,t){let o=t===void 0?e.createElement.bind(e):e.createElementNS.bind(e,t);return new Proxy({},{get(n,r){return typeof r=="string"?Z.bind(o.bind(void 0,r)):void 0},set(){return!1}})}var _=0n;function R(){let e=String(_++);return Object.assign(e,s(t=>{t.id=e}))}var J=/\s+/,k=new WeakSet,K=/([A-Z])/g,F,b;function De(e,t){let o=Symbol();if(t)return s(r=>{if(k.has(o))return;let a=w(r.ownerDocument);for(let[u,i]of Object.entries(e))if(typeof i=="string")O(a,u,i);else for(let l of Array.isArray(i)?i:[i])O(a,u,T(l));k.add(o)});let n=(F||"s")+R();return Object.assign(n,s(r=>{k.has(o)||O(w(r.ownerDocument),`.${n}`,T(e)),r.classList.add(n)}))}function w(e){if(b)return b;let t=e.createElement("style");return e.head.appendChild(t),b=t.sheet,w(e)}function O(e,t,o){e.insertRule(`${t}{${o}}`,e.cssRules.length)}function Ae(e){F=e}function Ce(e){b=e}function je(e,t){return s(o=>{for(let n of e.split(J))o.classList.toggle(n,t)})}function T(e){return Object.entries(e).map(Q).join("")}function Q([e,t]){return typeof t=="string"?(e.startsWith("--")||(e=e.replaceAll(K,"-$1").toLowerCase()),`${e}:${t};`):(Array.isArray(t)?t:[t]).map(o=>`${e}{${T(o)}}`).join("")}export{Y as attributes,De as css,s as hook,R as id,j as isReusable,P as jot,ie as on,E as remove,A as removeEventListeners,ae as reusable,Ae as setStylePrefix,Ce as setStyleSheet,L as spy,ge as tags,je as toggle,te as use};
//# sourceMappingURL=jot.min.js.map
