var c=[],l=new Set,u=new WeakMap,A=(e,t)=>m(e)-m(t),C=e=>e!=null,j=()=>{[...l].sort(A).map(R).filter(C).forEach(queueMicrotask),l.clear()},p=e=>{l.has(e)||(l.size===0&&queueMicrotask(j),l.add(e),(f(e)||[]).forEach(p))},b=e=>u.get(e),f=e=>b(e)?.[1],v=e=>{let t=new Set;c.push(t);let o;try{o=e()}finally{c.pop()}let n=Symbol();for(let r of t)f(r)?.add(n);return u.set(n,[[...t].map(m).reduce(P,-1)+1,new Set,()=>o=e()]),[()=>(h(n),o),()=>{for(let r of t)f(r)?.delete(n);t.clear(),u.delete(n)}]};function m(e){return b(e)?.[0]||0}function P(e,t){return Math.max(e,t)}function R(e){return b(e)?.[2]}function h(e){c[c.length-1]?.add(e)}function q(e){let t=Symbol();return u.set(t,[0,new Set]),[o=>(o?p(t):h(t),e),o=>(e=o,p(t))]}var d=new WeakMap;function k(e,...t){let o=d.get(e);o||d.set(e,o=[]),o.push(...t.map(v).map(F))}function O(e){for(let t of d.get(e)||[])t();d.delete(e)}function F(e){return e[1]}var y=new WeakMap;function w(e){for(let[t,o,n]of y.get(e)||[])e.removeEventListener(t,o,n)}function U(e,t,o){return s(n=>{n.addEventListener(e,t,o),y.get(n)?.push([e,t,o])===void 0&&y.set(n,[[e,t,o]])})}var T=new WeakSet;function V(e){return T.has(e)}function _(e){return T.add(e),e}function N(e,t){if(!(!t&&V(e))){for(let o of[...e.childNodes])N(o,t);O(e),w(e),e.parentNode?.removeChild(e)}}var g=Symbol();function x(e,t,o){if(o!=null){switch(typeof o){case"function":return $(e,t,o);case"object":{if("nodeType"in o)return t(o);let n=x.bind(void 0,e,t);return g in o?n(o[g](e)):Array.isArray(o)?o.forEach(n):void Object.assign(e,o)}}e.ownerDocument&&t(e.ownerDocument.createTextNode(String(o)))}}function $(e,t,o){let n=[],r,S,M=n.push.bind(n);function H(){let i=e.ownerDocument;if(!i)return;if(!r){if(n.length===0)return;t(r=i.createTextNode("")),t(S=i.createTextNode(""))}let a=i.createRange();a.setStartAfter(r),a.setEndBefore(S);let D=a.extractContents();if(setTimeout(N,100,D),n.length===0)return;let E=i.createDocumentFragment();E.append(...n),a.insertNode(E)}k(e,()=>{x(e,M,o(e)),H(),n.length=0})}function s(e){return{[g]:e}}function L(e,...t){let o=e.appendChild.bind(e),n=x.bind(void 0,e,o);return t.forEach(n),e}function me(e,t){return t||=null,s(o=>{for(let[n,r]of Object.entries(e)){if(r==null)return o.removeAttributeNS(t,n);o.setAttributeNS(t,n,String(r))}})}function W(...e){return L(this(),...e)}function Ne(e,t){let o=t===void 0?e.createElement.bind(e):e.createElementNS.bind(e,t);return new Proxy({},{get(n,r){return typeof r=="string"?W.bind(o.bind(void 0,r)):void 0},set(){return!1}})}export{me as attributes,s as hook,V as isReusable,L as jot,U as on,N as remove,w as removeEventListeners,_ as reusable,v as spy,Ne as tags,q as use};
//# sourceMappingURL=jot.core.min.js.map
