var k=Symbol(),g="$",u=new Set,a=new WeakMap,c;function H(e,t){return y(e)-y(t)}function P(){for(let e of[...u].sort(H).map($))e&&queueMicrotask(e);u.clear()}function x(e){if(!u.has(e)){u.size===0&&queueMicrotask(P),u.add(e);for(let t of a.get(e)?.observers||[])x(t)}}function O(e){let[t,o]=A(c),n={};try{Object.assign(n,e())}finally{o()}let r=Symbol();for(let s of t)a.get(s)?.observers.add(r);return a.set(r,{distance:[...t].map(y).reduce(R,-1)+1,observers:new Set,update(){Object.assign(n,e())}}),new Proxy(n,{get(s,d,b){return d===k?()=>{for(let i of t)a.get(i)?.observers.delete(r);t.clear(),t.delete(r)}:(c?.add(r),Reflect.get(s,d,b))},set(){return!1}})}function w(...e){for(let t of e)t[k]()}function F(e){let t=Symbol();return a.set(t,{distance:0,observers:new Set}),new Proxy(e,{get(o,n,r){return typeof n=="string"&&n.startsWith(g)?(x(t),Reflect.get(o,n.substring(g.length),r)):(c?.add(t),Reflect.get(o,n,r))},set(o,n,r,s){return typeof n=="string"&&n.startsWith(g)?!1:(x(t),Reflect.set(o,n,r,s))}})}function A(e){return[c=new Set,()=>c=e]}function y(e){return a.get(e)?.distance||0}function R(e,t){return Math.max(e,t)}function $(e){return a.get(e)?.update}var p=new WeakMap;function T(e,...t){let o=p.get(e);o||p.set(e,o=[]),o.push(...t.map(O))}function D(e){let t=p.get(e);if(t){for(let o of t)w(o);p.delete(e)}}var N=new WeakMap;function L(e){for(let[t,o,n]of N.get(e)||[])e.removeEventListener(t,o,n)}function B(e,t,o){return l(n=>{n.addEventListener(e,t,o),N.get(n)?.push([e,t,o])===void 0&&N.set(n,[[e,t,o]])})}var M=new WeakSet;function C(e){return M.has(e)}function U(e){return M.add(e),e}function S(e,t){if(!(!t&&C(e))){for(let o of[...e.childNodes])S(o,t);D(e),L(e),e.parentNode?.removeChild(e)}}var v=Symbol();function m(e,t,o){if(t!=null){switch(typeof t){case"function":return W(e,t,o);case"object":if(v in t)return m(e,t[v](e),o);if("nodeType"in t)return o(t);if(Array.isArray(t))for(let n of t)m(e,n,o);else Object.assign(e,t);return}e.ownerDocument&&o(e.ownerDocument.createTextNode(String(t)))}}function W(e,t,o){let n=[],r,s;function d(i){n.push(i)}function b(){let i=e.ownerDocument;if(!i)return;if(!r){if(n.length===0)return;o(r=i.createTextNode("")),o(s=i.createTextNode(""))}let f=i.createRange();f.setStartAfter(r),f.setEndBefore(s);let j=f.extractContents();if(setTimeout(S,100,j),n.length===0)return;let h=i.createDocumentFragment();h.append(...n),f.insertNode(h)}T(e,()=>{m(e,t(e),d),b(),n.length=0})}function l(e){return{[v]:e}}function E(e,...t){function o(n){e.appendChild(n)}for(let n of t)m(e,n,o);return e}function fe(e,t){return t||=null,l(o=>{for(let[n,r]of Object.entries(e)){if(r==null)return o.removeAttributeNS(t,n);o.setAttributeNS(t,n,String(r))}})}function be(e,t){let o=t===void 0?n=>e.createElement(n):n=>e.createElementNS(t,n);return new Proxy({},{get(n,r){if(typeof r=="string")return(...s)=>E(o(r),...s)}})}export{fe as attributes,O as derived,w as dispose,l as hook,C as isReusable,E as jot,F as mutable,B as on,S as remove,L as removeEventListeners,U as reusable,be as tags};
//# sourceMappingURL=jot.core.min.js.map
